{"ast":null,"code":"import { wait } from '../utils';\nlet initiallized = false;\nlet go;\nlet goExitPromise;\nexport async function initializeWasm(url) {\n  if (initiallized) {\n    return null;\n  }\n  if (typeof window === 'undefined') {\n    return Promise.resolve(null);\n  }\n  go = new Go();\n  if ('instantiateStreaming' in WebAssembly) {\n    const wasm = await WebAssembly.instantiateStreaming(fetch(url), go.importObject);\n    go.run(wasm.instance);\n  } else {\n    const bytes = await fetch(url).then(resp => resp.arrayBuffer());\n    const wasm = await WebAssembly.instantiate(bytes, go.importObject);\n    goExitPromise = go.run(wasm.instance);\n  }\n  await wait(100);\n  return go;\n}\nexport function reset() {\n  initiallized = false;\n}\nexport function getGO() {\n  return go;\n}\nexport function getGoExitPromsie() {\n  return goExitPromise;\n}","map":{"version":3,"names":["wait","initiallized","go","goExitPromise","initializeWasm","url","window","Promise","resolve","Go","WebAssembly","wasm","instantiateStreaming","fetch","importObject","run","instance","bytes","then","resp","arrayBuffer","instantiate","reset","getGO","getGoExitPromsie"],"sources":["C:/ysx/xm/mark/web/node_modules/open-im-sdk-wasm/lib/sdk/initialize.js"],"sourcesContent":["import { wait } from '../utils';\nlet initiallized = false;\nlet go;\nlet goExitPromise;\nexport async function initializeWasm(url) {\n    if (initiallized) {\n        return null;\n    }\n    if (typeof window === 'undefined') {\n        return Promise.resolve(null);\n    }\n    go = new Go();\n    if ('instantiateStreaming' in WebAssembly) {\n        const wasm = await WebAssembly.instantiateStreaming(fetch(url), go.importObject);\n        go.run(wasm.instance);\n    }\n    else {\n        const bytes = await fetch(url).then(resp => resp.arrayBuffer());\n        const wasm = await WebAssembly.instantiate(bytes, go.importObject);\n        goExitPromise = go.run(wasm.instance);\n    }\n    await wait(100);\n    return go;\n}\nexport function reset() {\n    initiallized = false;\n}\nexport function getGO() {\n    return go;\n}\nexport function getGoExitPromsie() {\n    return goExitPromise;\n}\n"],"mappings":"AAAA,SAASA,IAAI,QAAQ,UAAU;AAC/B,IAAIC,YAAY,GAAG,KAAK;AACxB,IAAIC,EAAE;AACN,IAAIC,aAAa;AACjB,OAAO,eAAeC,cAAcA,CAACC,GAAG,EAAE;EACtC,IAAIJ,YAAY,EAAE;IACd,OAAO,IAAI;EACf;EACA,IAAI,OAAOK,MAAM,KAAK,WAAW,EAAE;IAC/B,OAAOC,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;EAChC;EACAN,EAAE,GAAG,IAAIO,EAAE,CAAC,CAAC;EACb,IAAI,sBAAsB,IAAIC,WAAW,EAAE;IACvC,MAAMC,IAAI,GAAG,MAAMD,WAAW,CAACE,oBAAoB,CAACC,KAAK,CAACR,GAAG,CAAC,EAAEH,EAAE,CAACY,YAAY,CAAC;IAChFZ,EAAE,CAACa,GAAG,CAACJ,IAAI,CAACK,QAAQ,CAAC;EACzB,CAAC,MACI;IACD,MAAMC,KAAK,GAAG,MAAMJ,KAAK,CAACR,GAAG,CAAC,CAACa,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,WAAW,CAAC,CAAC,CAAC;IAC/D,MAAMT,IAAI,GAAG,MAAMD,WAAW,CAACW,WAAW,CAACJ,KAAK,EAAEf,EAAE,CAACY,YAAY,CAAC;IAClEX,aAAa,GAAGD,EAAE,CAACa,GAAG,CAACJ,IAAI,CAACK,QAAQ,CAAC;EACzC;EACA,MAAMhB,IAAI,CAAC,GAAG,CAAC;EACf,OAAOE,EAAE;AACb;AACA,OAAO,SAASoB,KAAKA,CAAA,EAAG;EACpBrB,YAAY,GAAG,KAAK;AACxB;AACA,OAAO,SAASsB,KAAKA,CAAA,EAAG;EACpB,OAAOrB,EAAE;AACb;AACA,OAAO,SAASsB,gBAAgBA,CAAA,EAAG;EAC/B,OAAOrB,aAAa;AACxB"},"metadata":{},"sourceType":"module","externalDependencies":[]}